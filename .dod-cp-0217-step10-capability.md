---
id: dod-step10-capability-update
version: 1.0.0
created: 2026-02-17
updated: 2026-02-17
changelog:
  - 1.0.0: 初始版本
---

# DoD: /dev Step 10 — 自动更新 Capability Stage

## 验收清单

- [ ] **新增脚本**: `skills/dev/scripts/update-capability.sh` 存在
- [ ] **脚本逻辑**: 从 `.dev-mode` 读取 `task_id`，调用 Brain API 更新 capability stage
- [ ] **静默降级**: Brain 不可用或无 capability_id 时不抛出错误
- [ ] **Step 10 更新**: `skills/dev/steps/10-learning.md` 包含调用 `update-capability.sh` 的说明
- [ ] **测试**: `tests/dev/update-capability.test.ts` 覆盖主要路径

## CI 映射

| DoD 项 | Test |
|--------|------|
| update-capability.sh 存在 | tests/dev/update-capability.test.ts > 脚本存在且可执行 |
| 无 task_id 时静默跳过 | tests/dev/update-capability.test.ts > 无 task_id 时静默跳过 |
| Brain 不可用时静默跳过 | tests/dev/update-capability.test.ts > Brain 不可用时静默跳过 |
| task_id 从 .dev-mode 读取 | tests/dev/update-capability.test.ts > .dev-mode 中的 task_id 被正确读取 |
