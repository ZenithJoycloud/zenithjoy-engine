# PRD: Stop Hook 会话隔离

## 需求来源

用户反馈：多个 Claude 会话在同一项目工作时发生"串线"。一个会话创建的 `.dev-mode` 文件会被另一个会话的 Stop Hook 检测到，导致任务交叉。

## 功能描述

修复 Stop Hook 的会话隔离问题：检查 `.dev-mode` 中记录的分支是否与当前分支匹配，不匹配则忽略。

## 涉及文件

- `hooks/stop.sh` - 添加分支匹配检查

## 成功标准

1. Stop Hook 只处理当前分支的 `.dev-mode` 文件
2. 如果 `.dev-mode` 中的 branch 与当前分支不匹配，直接 exit 0
3. 多个 Claude 会话在不同分支工作时不会互相干扰

## 非目标

- 不修改 `.dev-mode` 文件格式
- 不添加进程/会话 ID（Claude Code 未暴露）
